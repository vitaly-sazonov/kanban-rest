<h1>Board</h1>
<h2>ID: {{ id }}</h2>
<section class="column-wrapper">
  <section
    class="columns"
    *ngIf="
      (currentBoard$ | async)!.columns &&
      (currentBoard$ | async)!.columns!.length > 0
    ">
    <article
      class="column"
      *ngFor="let item of (currentBoard$ | async)!.columns">
      <mat-accordion class="column-accordion" togglePosition="before">
        <mat-expansion-panel class="column-inner" expanded>
          <mat-expansion-panel-header>
            <mat-panel-title class="column-title">
              {{ item.title }}
            </mat-panel-title>
            <button
              mat-icon-button
              [matMenuTriggerFor]="menu"
              (click)="toggleColumnOptions($event)">
              <mat-icon>more_vert</mat-icon>
            </button>
            <mat-menu #menu="matMenu">
              <button
                mat-menu-item
                (click)="editColumn(item.id!, item.order!, item.title)">
                <mat-icon>edit</mat-icon>
                <span>{{ 'BOARD.editColumn' | translate }}</span>
              </button>
              <button mat-menu-item (click)="removeColumn(item.id!)">
                <mat-icon>delete</mat-icon>
                <span>{{ 'BOARD.removeColumn' | translate }}</span>
              </button>
            </mat-menu>
          </mat-expansion-panel-header>
          <section
            class="task-list"
            *ngIf="item.tasks && item.tasks.length > 0">
            <mat-card *ngFor="let taskItem of item.tasks" class="task-item">
              <button mat-icon-button class="task-edit">
                <mat-icon class="task-edit-icon">edit</mat-icon>
              </button>
              <mat-card-title class="task-title noselect">
                {{ taskItem.title }}
              </mat-card-title>
              <mat-card-subtitle class="task-description noselect">
                {{ taskItem.description }}
              </mat-card-subtitle>
            </mat-card>
          </section>
          <mat-action-row>
            <button
              mat-stroked-button
              color="primary"
              (click)="createTask(item.id!)">
              <mat-icon class="icon-button">playlist_add</mat-icon
              >{{ 'BOARD.addTask' | translate }}
            </button>
          </mat-action-row>
        </mat-expansion-panel>
      </mat-accordion>
    </article>
  </section>
  <button class="add-column" (click)="createColumn()">
    {{ 'BOARD.addNewColumn' | translate }}
  </button>
</section>
<button [routerLink]="['../../main']">BACK to BOARDS</button>
