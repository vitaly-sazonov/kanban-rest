<section class="first-container">
  <header class="header">
    <h1 class="title">{{ 'BOARDS' | translate }}</h1>
  </header>
  <aside class="search-container">
    <section>
      <mat-icon class="icon">search</mat-icon>
      <input
        matInput
        class="search-input"
        placeholder="{{ 'search board' | translate }}"
        [(ngModel)]="searchRequest"
        (ngModelChange)="rememberSearch()"
        autofocus />
      <mat-icon class="delete-search" (click)="deleteSearch()">close</mat-icon>
      <section class="sort-section">
        <h2 class="sort-button" (click)="isReverseBoards = !isReverseBoards">
          A-Z
        </h2>
        <h2 class="sort-direction" [class.rotate]="isReverseBoards">â†‘</h2>
      </section>
      <mat-icon
        class="expand-icon"
        *ngIf="isAllShort === false"
        (click)="isAllShort = true"
        >unfold_less</mat-icon
      >
      <mat-icon
        class="expand-icon"
        *ngIf="isAllShort"
        (click)="isAllShort = false"
        >unfold_more</mat-icon
      >
    </section>
  </aside>
</section>
<main class="boards-container">
  <div
    class="inner-container"
    *ngIf="
      ((boards$ | async)! | search: searchRequest).length > 0;
      else noBoards
    ">
    <section class="statistics" *ngIf="isSearching === false">
      <h2 class="boards-all">
        <mat-icon>dashboard</mat-icon>{{ 'Total boards' | translate }}:
        {{ boardsQuantity$ | async }}
      </h2>
      <h2 [routerLink]="['basket']" class="basket">
        <mat-icon>delete_outline</mat-icon>
        {{ 'Recently deleted boards' | translate }}:
        {{ (basket$$ | async)?.length || '0' }}
      </h2>
      <h2 class="columns-all">
        <mat-icon>view_column</mat-icon>{{ 'Total columns' | translate }}:
        {{ columnsQuantity$ | async }}
      </h2>
      <h2 class="tasks-all">
        <mat-icon>description</mat-icon>{{ 'Total tasks' | translate }}:
        {{ tasksQuantity$ | async }}
      </h2>
    </section>
    <h2 *ngIf="isSearching" class="result-title">
      {{ 'Search results' | translate }}:
    </h2>
    <app-board
      *ngFor="
        let item of (boards$ | async)!
          | search: searchRequest
          | sortByAlphabet: isReverseBoards
      "
      [board]="item"
      [searchRequest]="searchRequest"
      [isAllShort]="isAllShort">
    </app-board>
  </div>
</main>
<ng-template class="template" #noBoards>
  <h2 *ngIf="(isLoading$ | async) === false">{{ 'No Boards' | translate }}</h2>
  <h3 *ngIf="isLoading$ | async">{{ 'LOADING' | translate }}</h3>
  <mat-spinner
    diameter="30"
    color="primary"
    *ngIf="isLoading$ | async"></mat-spinner>
</ng-template>
